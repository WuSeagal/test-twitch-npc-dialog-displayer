import{d as x,r as o,o as T,b,e as n,f as z,g as R,t as S,h as a,w as i,v as m,i as W,a as y}from"./index-DzSCzPa-.js";import{g as B,f as D,_ as L,l as E}from"./twitch-Bflpqk0Z.js";const I={class:"login-view"},M={key:0},q={key:1},F={class:"form-container"},O={key:0,class:"obs-url"},G=x({__name:"LoginView",setup(P){const r=o(null),u=o(null),p=o(""),v=o(""),U=o(""),d=o(50),f=o(12),s=o("#000000"),g=o("normal");T(async()=>{const e=new URLSearchParams(location.search);r.value=e.get("token")||B(),d.value=Number.isNaN(parseInt(e.get("typingSpeed")||""))?50:parseInt(e.get("typingSpeed")||""),f.value=Number.isNaN(parseInt(e.get("fontSize")||""))?12:parseInt(e.get("fontSize")||""),r.value&&(u.value=await D(r.value)),p.value=e.get("user")||(u==null?void 0:u.value.display_name)||"",v.value=e.get("channel")||(u==null?void 0:u.value.login)||"",s.value=e.get("fontColor")||"#000000",g.value=e.get("fontWeight")||"normal"});function w(){E()}function N(){const e=`https://test-twitch-npc-dialog-displayer.lindebot.com/display?token=${r.value}&user=${p.value}&channel=${v.value}&typingSpeed=${d.value}&fontSize=${f.value}&fontColor=${encodeURIComponent(s.value)}&fontWeight=${g.value}`;navigator.clipboard.writeText(e),U.value=e}const k=o(null);function $(){var e;(e=k.value)==null||e.testTypingEffect()}return(e,l)=>{var C,V;return y(),b("div",I,[r.value?(y(),b("div",q,[n("div",F,[n("p",null,"👤 "+S((C=u.value)==null?void 0:C.display_name)+" 已登入",1),l[20]||(l[20]=n("br",null,null,-1)),n("label",null,[l[6]||(l[6]=a(" 🎯 觀察對象名稱(聊天室暱稱)：")),l[7]||(l[7]=n("br",null,null,-1)),i(n("input",{"onUpdate:modelValue":l[0]||(l[0]=t=>p.value=t),placeholder:"想追蹤的 user name"},null,512),[[m,p.value]])]),l[21]||(l[21]=n("br",null,null,-1)),n("label",null,[l[8]||(l[8]=a(" 🛰️ 觀察對象的發言頻道(頻道主人帳號username)：")),l[9]||(l[9]=n("br",null,null,-1)),i(n("input",{"onUpdate:modelValue":l[1]||(l[1]=t=>v.value=t),placeholder:"頻道名 (預設自己)"},null,512),[[m,v.value]])]),l[22]||(l[22]=n("br",null,null,-1)),n("label",null,[l[10]||(l[10]=a(" 語言速度(幾毫秒跑一個字)：")),l[11]||(l[11]=n("br",null,null,-1)),i(n("input",{"onUpdate:modelValue":l[2]||(l[2]=t=>d.value=t),placeholder:"預設50毫秒"},null,512),[[m,d.value]]),l[12]||(l[12]=a(" 毫秒 "))]),l[23]||(l[23]=n("br",null,null,-1)),n("label",null,[l[13]||(l[13]=a(" 字體大小(px)：")),l[14]||(l[14]=n("br",null,null,-1)),i(n("input",{"onUpdate:modelValue":l[3]||(l[3]=t=>f.value=t),placeholder:"預設12px"},null,512),[[m,f.value]]),l[15]||(l[15]=a(" px "))]),l[24]||(l[24]=n("br",null,null,-1)),n("label",null,[l[16]||(l[16]=a(" 字體顏色：")),l[17]||(l[17]=n("br",null,null,-1)),i(n("input",{type:"color","onUpdate:modelValue":l[4]||(l[4]=t=>s.value=t)},null,512),[[m,s.value]]),n("span",null,S(s.value),1)]),l[25]||(l[25]=n("br",null,null,-1)),n("label",null,[l[19]||(l[19]=a(" 是否粗體： ")),i(n("select",{"onUpdate:modelValue":l[5]||(l[5]=t=>g.value=t)},l[18]||(l[18]=[n("option",{value:"normal"},"否",-1),n("option",{value:"bold"},"是",-1)]),512),[[W,g.value]])]),l[26]||(l[26]=n("br",null,null,-1)),n("button",{onClick:N},"📋 複製 OBS URL"),U.value?(y(),b("p",O,"✅ URL："+S(U.value),1)):R("",!0),n("button",{onClick:$}," 測試用訊息 ")]),z(L,{ref_key:"chatDisplayRef",ref:k,targetUser:p.value,channel:v.value||((V=u.value)==null?void 0:V.login),typingSpeed:d.value,fontSize:f.value,fontColor:s.value,fontWeight:g.value},null,8,["targetUser","channel","typingSpeed","fontSize","fontColor","fontWeight"])])):(y(),b("div",M,[n("button",{onClick:w},"使用 Twitch 登入")]))])}}});export{G as default};
